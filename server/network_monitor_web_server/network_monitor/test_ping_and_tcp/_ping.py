# -*- coding: utf-8 -*-
"""
-------------------------------------------------
   File Nameï¼š     test_ping
   Description :
   Author :       'li'
   dateï¼š          2019/9/20
-------------------------------------------------
   Change Activity:
                   2019/9/20:
-------------------------------------------------
"""
import os
from random import randint

from scapy.layers.inet import ICMP, IP
from scapy.sendrecv import sr1

__author__ = 'li'
a = ''


def pingServer(server):
    a = '172.21.12.1'
    ip_id, icmp_id, icmp_seq = randint(1, 65535), randint(1, 65535), randint(1, 65535)
    ping_packet = IP(dst=server, ttl=64, id=ip_id) / ICMP(id=icmp_id, seq=icmp_seq) / b'rootkit'
    a = sr1(ping_packet, timeout=2)
    if a:
        return server
    else:
        return 1


a = """10.40.12.126
172.36.0.164
10.40.12.30
10.40.12.199
172.36.0.229
9.156.46.242
10.3.97.130
10.1.1.9
172.71.19.4
10.40.12.98
10.40.12.84
172.36.0.172
10.40.12.124
10.40.32.27
10.40.12.85
10.40.12.172
172.56.136.19
10.40.12.126
172.36.0.229
10.40.32.21
172.57.29.104
10.40.12.118
172.57.29.104
172.36.0.164
10.40.12.178
172.16.1.58
20.102.5.252
20.102.5.252
10.40.12.119
9.156.46.242
192.168.10.10
10.40.32.22
10.40.12.128
10.40.12.94
172.36.0.171
10.40.31.109
10.40.12.181
10.40.32.18
172.36.0.195
10.40.12.128
10.40.12.177
10.40.12.85
172.36.0.166
10.40.12.124
10.40.12.182
10.40.12.47
10.40.12.76
172.36.0.163
8.8.8.161
10.40.12.199
10.3.97.130
172.36.0.167
172.170.24.81
10.40.12.87
192.168.10.10
188.10.23.32
172.16.1.58
10.40.12.178
10.40.12.112
172.16.113.203
9.234.51.102
10.40.31.60
9.234.15.22
188.10.23.16
10.40.12.177
10.40.12.146
9.234.101.28
10.40.32.28
10.40.31.109
10.40.32.28
172.170.24.81
10.40.12.172
10.40.12.181
188.10.23.17
10.40.12.182
10.40.32.27
10.40.12.104
172.71.19.4
188.10.23.16
10.40.12.94
172.16.113.203
172.36.0.163
10.40.31.60
10.40.12.119
172.56.136.19
10.40.31.117
10.40.12.112
10.40.12.104
188.10.23.17
172.36.0.166
9.234.101.28
10.40.32.22
10.40.12.87
188.10.23.32
10.40.12.118
172.36.0.172
172.36.0.167
172.36.0.195
10.40.12.146
9.234.15.22
8.8.8.161
10.40.12.98
10.40.12.76
10.40.31.117
10.1.1.9
9.234.51.102
10.40.32.21
10.40.12.84
172.36.0.171
10.40.32.18
10.40.12.30
10.40.12.47
"""
b = a.split('\n')
res = []
for i in b:

    if len(i) > 4:
        res.append(pingServer(i))
    print(res)
